import*as t from"./wasm/llama.js";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const a=(o={default:()=>t.default},n={},e.d(n,o),n);var o,n;const r=[/main:.*/,/.*_model_load:.*/];let s;const l=t=>{console.log("model:"+t),(t=>{for(var e=0;e<r.length;e+=1)if(r[e].test(t))return!1;return!0})(t)&&postMessage({event:3,line:t})},d=async t=>{const e={noInitialRun:!0,print:l};s=await(0,a.default)(e),function(t,e){const a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=t=>{const e=a.response;if(e){const t=new Uint8Array(e);o=t,s.FS_createPath("/","models",!0,!0),s.FS_createDataFile("/models","model.bin",o,!0,!0,!0),postMessage({event:1}),console.log("model: Loaded")}var o},a.send(null)}(t)};self.addEventListener("message",(t=>{switch(t.data.event){case 0:d(t.data.url);break;case 2:((t,e,a,o,n,r,l,d,p,i)=>{const c=["-p",t.toString(),"-n",a.toString(),"-c",p.toString(),"--top_k",o.toString(),"--top_p",n.toString(),"--temp",r.toString(),"-m","/models/model.bin","-r",i.toString()];s.callMain(c),postMessage({event:4})})(t.data.prompt,t.data.seed,t.data.max_token_len,t.data.top_k,t.data.top_p,t.data.temp,t.data.repeat_last_n,t.data.repeat_penalty,t.data.context_size,t.data.reverse_prompt)}}),!1);